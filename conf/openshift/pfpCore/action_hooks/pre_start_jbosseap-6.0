#!/bin/bash

echo "** inside pre_start_jbosseap-6.0 "

cleanRuntime() {
    if [ -e $HOME/${openshift.jboss.cartridge.type}/${openshift.jboss.cartridge.type}/standalone/log/server.log ]
    then
        echo -en "cleanRuntime() \n";
        rm $HOME/${openshift.jboss.cartridge.type}/${openshift.jboss.cartridge.type}/standalone/log/server.log
    fi
}

createSoftLinksToWebArchives() {
    cd $OPENSHIFT_REPO_DIR/deployments
    echo -en "createSoftLinksToWebArchives() will now create soft links \n";

    if [ -e ${console.server.name} ]
    then
        rm ${console.server.name}
    fi
    ln -s ~/${openshift.jboss.cartridge.type}/tmp/deployments/${console.server.name}
    touch ${console.server.name}.dodeploy


    if [ -e ${console.name} ]
    then
        rm ${console.name}
    fi
    ln -s ~/${openshift.jboss.cartridge.type}/tmp/deployments/${console.name}
    touch ${console.name}.dodeploy
}

cleanRuntime
createSoftLinksToWebArchives
